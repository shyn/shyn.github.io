<!doctype html>
<html>
    <head>
	<meta name="generator" content="Hugo 0.18.1" />
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>Complex Standalone</title>
        
  		<link href="http://dengx.in/index.xml" rel="alternate" type="application/rss+xml" title="Complex Standalone" />
  		<link href="http://dengx.in/index.xml" rel="feed" type="application/rss+xml" title="Complex Standalone" />
		
        <link rel="stylesheet" type="text/css" href="/css/style.css">
    </head>
	<body>
		<header role="banner">
			<h1 class="site-title">
				<a href="/">Complex Standalone</a>
			</h1>
			<nav id="main">
				<ul>
					<li class="nav-" role="presentation"><a href="/post/">归档</a></li>
					<li class="nav-" role="presentation"><a href="/categories/">分类</a></li>
					<li class="nav-" role="presentation"><a href="/tags/">标签</a></li>
                    
					<li class="nav-" role="presentation"><a href="/index.xml">订阅</a></li>
				</ul>
			</nav>
		</header>
        <main>



<article>
	<header>
		<h1>
			<a href="/post/deploy-google-bbr/">部署 google bbr</a>
		</h1>
		<div class="entry-mata">
			<span class="tags"></span>
            <time datetime="2017-02-28 09:20:06 &#43;0800 CST">2017 年 2 月 28 日</time>
		</div>	
	</header>
	<div class="content">
			

<p>试了一下 google 的 bbr TCP 拥堵算法，好像很厉害，速度快了不少，建议不要再使用 kcp 等暴力发包的加速方案，会让网络大环境变差。bbr 是单边加速，仅需设置一下服务器端即可。</p>

<p>其实 bbr 已经加入 4.9 以上的 linux 内核，所以无非是升级到最新内核，设置一下默认使用 bbr 就可以了。</p>

<p>下面以 vultr 的 CentOS 7 x64 的实例来示范，其他发行版主要是升级内核方式不同。</p>

<h2 id="一-升级内核">一、升级内核</h2>

<p>查看当前内核版本：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>uname -r
</pre></div>

<p>输出结果可能是这样：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>3.10.0-514.2.2.el7.x86_64
</pre></div>

<p>表明当前内核版本 3.10</p>

<p>shell 中输入一下指令：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>sudo rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
sudo rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm
sudo yum --enablerepo<span style="color: #f92672">=</span>elrepo-kernel install kernel-ml -y
</pre></div>

<p>检查一下是否升级成功：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>rpm -qa <span style="color: #f8f8f2">|</span> grep kernel
</pre></div>

<p>结果：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>kernel-ml-4.9.0-1.el7.elrepo.x86_64
kernel-3.10.0-514.el7.x86_64
kernel-tools-libs-3.10.0-514.2.2.el7.x86_64
kernel-tools-3.10.0-514.2.2.el7.x86_64
kernel-3.10.0-514.2.2.el7.x86_64
</pre></div>

<p>有第一行的 4.9.0 甚至 4.10 就说明成功了。</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>grub2-set-default 0
reboot
</pre></div>

<h2 id="二-开启-bbr">二、开启 bbr</h2>

<p>查看一下内核：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>uname -r
</pre></div>

<p>查看一下 bbr 又没有：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>sudo sysctl net.ipv4.tcp_available_congestion_control
</pre></div>

<p>输出应该是这样：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>net.ipv4.tcp_available_congestion_control <span style="color: #f92672">=</span> bbr cubic reno
</pre></div>

<p>设置一下：</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>sudo sysctl net.ipv4.tcp_congestion_control<span style="color: #f92672">=</span>bbr
sudo sysctl net.core.default_qdisc<span style="color: #f92672">=</span>fq
</pre></div>

<p>这样应该就 OK 啦！可以享受 google 黑科技了。</p>

	</div>
</article>

<article>
	<header>
		<h1>
			<a href="/post/use-docker/">拥抱 Docker</a>
		</h1>
		<div class="entry-mata">
			<span class="tags"></span>
            <time datetime="2016-08-23 10:01:08 &#43;0800 CST">2016 年 8 月 23 日</time>
		</div>	
	</header>
	<div class="content">
			

<p>一直以来，服务器的部署都很让我头疼，每次都要进行一堆配置，繁琐重复的劳动太多，自己时间有限，加上到 VPS 的网络不是那么稳定，很多自动化部署和运维的工具都没尝试，不过现在看来也没有什么必要了，因为知道了 Docker。</p>

<p>真正想用进一步了解和使用它其实是听了</p>

<h1 id="安装-docker">安装 Docker</h1>

<p><a href="https://docker.com">Docker 官方文档</a>详尽地列出了各个系统下的 Docker 安装说明，不多说了。</p>

<p>补充一下： Windows/Mac 用户，推荐安装 Docker for Window/Mac，而不是 Docker Toolbox。前者可以直接利用宿主系统的虚拟化机制，拥有更好的性能；后者需要借助 VirtualBox 运行的 Linux 虚拟机，你可能会很不爽。</p>

	</div>
</article>

<article>
	<header>
		<h1>
			<a href="/post/setup-a-secure-shadowsocks-server-in-15-minutes/">15 分钟创建安全的个人 shadowsocks 服务</a>
		</h1>
		<div class="entry-mata">
			<span class="tags"></span>
            <time datetime="2016-06-04 20:18:35 &#43;0800 CST">2016 年 6 月 4 日</time>
		</div>	
	</header>
	<div class="content">
			

<p>这年头，科学上网是中国网民的必修课，然后并不是每个人都懂技术，虽然网上介绍这方面的很多，但是多数没有注重基本的安全设置，这样的话，就算小白学着你的方法一步一步配置成功了，但很快也会变成肉鸡吧，用户的所有上网行为也都暴露给了骇客，那样的话还不如自己买一个帐号放心。
网上卖 shadowsocks 帐号的很多，各种论坛、群里都能见到这种二道贩子，但你觉得他安全吗？其实一台 5 美元的服务器就可以创建很多的帐号，服务器流量、带宽都有限，超售是很普遍的，这样服务质量不能得到保障。对于那些大型卖家，也不能放心，有的网站底部都显示已经在公安部备案了。况且大量用户的话，生意还能做下去，只有一个原因。为了让自己翻的放心一些，要么去买那些比较贵的、可靠的服务商（可能你也不知道有哪些），那么呢，其实你可以自己买服务器搭建，一点都没有想象中的那么麻烦！而且一台服务器可以设置很多帐号，可以多人合用，流量都是绝对够用的，完全不用考虑。你只需要一个月花 5 美元，已经现在别要害怕、别怕麻烦、耐心的最好设置就可以了！</p>

<h2 id="购买-digitalocean-服务器">购买 digitalocean 服务器</h2>

	</div>
</article>


<nav class="pagination" role="pagination">
    

    
    
    
    <a class="older-posts" href="/page/2/">更多 <i class="fa fa-chevron-circle-right"></i></a>
    
</nav>



</main>
<footer role="contentinfo">
	<p class="copyright">All rights left. </p>
</footer>
<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async>
</script>
</body>
</html>
